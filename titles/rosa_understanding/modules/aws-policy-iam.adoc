:system-module-type: CONCEPT
// Module included in the following assemblies:
//
// * assemblies/aws-ccs.adoc

[id="aws-policy-iam_{context}"]
= Red Hat managed IAM references for AWS

[role="_abstract"]
Red Hat is responsible for creating the following AWS resources.

== IAM Policies

[NOTE]
====
IAM policies are subject to modification as the capabilities of {product-title} change.
====

The *AdministratorAccess* policy is used by the `admin` role. It provides Red Hat the access necessary to administer the {product-title} cluster in the customer-provided AWS account.

----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Action": "*",
            "Resource": "*",
            "Effect": "Allow"
        }
    ]
}
----

The *CustomerAdministatorAccess* role provides the customer access to administer a subset of services within the AWS account. At this time, the following are allowed:

* VPC Peering
* VPN Setup
* Direct Connect (only available if granted through the SCP policy)

----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "ec2:AttachVpnGateway",
                "ec2:DescribeVpnConnections",
                "ec2:AcceptVpcPeeringConnection",
                "ec2:DeleteVpcPeeringConnection",
                "ec2:DescribeVpcPeeringConnections",
                "ec2:CreateVpnConnectionRoute",
                "ec2:RejectVpcPeeringConnection",
                "ec2:DetachVpnGateway",
                "ec2:DeleteVpnConnectionRoute",
                "ec2:DeleteVpnGateway",
                "ec2:DescribeVpcs",
                "ec2:CreateVpnGateway",
                "ec2:ModifyVpcPeeringConnectionOptions",
                "ec2:DeleteVpnConnection",
                "ec2:CreateVpcPeeringConnection",
                "ec2:DescribeVpnGateways",
                "ec2:CreateVpnConnection",
                "ec2:DescribeRouteTables",
                "ec2:CreateTags",
                "ec2:CreateRoute",
          "directconnect:*"
            ],
            "Resource": "*"
        }
    ]
}
----


The *BillingReadOnlyAccess* role provides read-only access to view billing and usage information for the account if it is enabled.

Billing and usage access is only granted if the root account in the AWS Organization has it enabled. This is an optional step the customer must perform to enable read-only billing and usage access and does not impact the creation of this profile and the role that uses it. If not enabled, users will not see billing and usage information. See this tutorial on link:https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_billing.html#tutorial-billing-step1[how to enable access to billing data].

----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "aws-portal:ViewAccount",
                "aws-portal:ViewBilling"
            ],
            "Resource": "*"
        }
    ]
}
----

== IAM users

The `osdManagedAdmin` is created immediately after taking control of the customer-provided AWS account. This is the user that will be performing the {product-title} cluster install.

== IAM roles

The `network-mgmt` role provides customer-federated administrative access to the AWS account through a separate AWS account. It also has the same access as a read-only role. The following policies are attached to the role:

* AmazonEC2ReadOnlyAccess
* AmazonEC2ReadOnlyAccess

The `read-only` role provides customer-federated read-only access to the AWS account through a separate AWS account. The following policies are attached to the role:

* AWSAccountUsageReportAccess
* AmazonEC2ReadOnlyAccess
* AmazonS3ReadOnlyAccess
* IAMReadOnlyAccess
* BillingReadOnlyAccess
